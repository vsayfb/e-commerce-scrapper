<!DOCTYPE html>
<html>
<head>
    <title>Search Form</title>
</head>
<body>
<h1>Search Form</h1>
<form id="search">
    <label for="keyword">Enter keyword:</label>
    <input type="text" id="keyword" name="keyword" required>
    <input type="submit" value="Search">
</form>

<ul id="output"></ul>

</body>

<script>

    const form = document.getElementById("search");
    const output = document.getElementById("output");


    form.addEventListener("submit", function (e) {

        const inp = form.getElementById("keyword")

        e.preventDefault()

        fetch('http://localhost:5555/search?keyword=' + inp.value)
            .then(response => {

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                return response.json();
            })
            .then(data => {

                data.forEach(p=>{

                    const html = ` <li>
                        <h2>${p.title}</h2>
                        <p><strong>Site:</strong> ${p.site}</p>
                        <p><strong>Price:</strong> ${p.price}</p>
                        <p><strong>URL:</strong> <a href="${p.url}" target="_blank">${p.url}</a></p>
                        <img src="${p.image}" alt="${p.title} Image">
                    </li>`;


                    output.innerHTML += html;
                })

                console.log('Received JSON:', data);
            })
            .catch(error => {

                console.error('Error:', error);
            });

    })


</script>


</html>
